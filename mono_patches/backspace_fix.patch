Index: mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/X11Keyboard.cs
===================================================================
--- mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/X11Keyboard.cs	(revision 160737)
+++ mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/X11Keyboard.cs	(working copy)
@@ -1193,7 +1193,10 @@
 				return s.Length;
 			} else {
 				lookup_buffer.Length = 0;
-				res = XLookupString (ref xevent, lookup_buffer, len, out keysym_res, IntPtr.Zero);
+				IntPtr ptr = System.Runtime.InteropServices.Marshal.AllocHGlobal(len + 1);
+				res = XLookupString (ref xevent, ptr, len, out keysym_res, IntPtr.Zero);
+				lookup_buffer.Append(System.Runtime.InteropServices.Marshal.PtrToStringAnsi(ptr, res));
+				System.Runtime.InteropServices.Marshal.FreeHGlobal(ptr);
 				keysym = (XKeySym) keysym_res.ToInt32 ();
 				return res;
 			}
@@ -1258,9 +1261,9 @@
 		[DllImport ("libX11")]
 		private static extern bool XSetLocaleModifiers (string mods);
 
+		[DllImport ("libX11", CharSet = CharSet.Ansi)]
+		internal extern static int XLookupString(ref XEvent xevent, IntPtr buffer, int num_bytes, out IntPtr keysym, IntPtr status);
 		[DllImport ("libX11")]
-		internal extern static int XLookupString(ref XEvent xevent, StringBuilder buffer, int num_bytes, out IntPtr keysym, IntPtr status);
-		[DllImport ("libX11")]
 		internal extern static int Xutf8LookupString(IntPtr xic, ref XEvent xevent, byte [] buffer, int num_bytes, out IntPtr keysym, out IntPtr status);
 
 		[DllImport ("libX11")]
