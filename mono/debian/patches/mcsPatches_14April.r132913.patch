From 0bd114ee4fcaeb55bbf060bd89e4a3de4619e58f Mon Sep 17 00:00:00 2001
From: Quilt patch <unknown@unknown.com>
Date: Tue, 30 Aug 2011 16:56:38 +0200
Subject: [PATCH] mcsPatches_14April.r132913

---
 .../DataGridViewColumnCollection.cs                |    2 ++
 .../DataGridViewRowCollection.cs                   |    2 ++
 .../InternalConfigurationHost.cs                   |    2 ++
 3 files changed, 6 insertions(+), 0 deletions(-)

Index: fieldworks-mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/DataGridViewColumnCollection.cs
===================================================================
--- fieldworks-mono.orig/mcs/class/Managed.Windows.Forms/System.Windows.Forms/DataGridViewColumnCollection.cs
+++ fieldworks-mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/DataGridViewColumnCollection.cs
@@ -101,6 +101,8 @@
 
 		public virtual void Clear ()
 		{
+			dataGridView.CurrentCell = null;
+
 			base.List.Clear ();
 			
 			// When we clear the column collection, all rows get deleted
Index: fieldworks-mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/DataGridViewRowCollection.cs
===================================================================
--- fieldworks-mono.orig/mcs/class/Managed.Windows.Forms/System.Windows.Forms/DataGridViewRowCollection.cs
+++ fieldworks-mono/mcs/class/Managed.Windows.Forms/System.Windows.Forms/DataGridViewRowCollection.cs
@@ -255,6 +255,8 @@
 
 		public virtual void Clear ()
 		{
+			dataGridView.CurrentCell = null;
+
 			int total = list.Count;
 			
 			DataGridView.OnRowsPreRemovedInternal (new DataGridViewRowsRemovedEventArgs (0, total));
Index: fieldworks-mono/mcs/class/System.Configuration/System.Configuration/InternalConfigurationHost.cs
===================================================================
--- fieldworks-mono.orig/mcs/class/System.Configuration/System.Configuration/InternalConfigurationHost.cs
+++ fieldworks-mono/mcs/class/System.Configuration/System.Configuration/InternalConfigurationHost.cs
@@ -71,6 +71,8 @@
 		public virtual Type GetConfigType (string typeName, bool throwOnError)
 		{
 			Type type = Type.GetType (typeName);
+			if (type == null && typeName.Split(',').Length == 1) // try System.dll if nothing else specified
+				type = Type.GetType (typeName + ",System");
 			if (type == null && throwOnError)
 				throw new ConfigurationErrorsException ("Type '" + typeName + "' not found.");
 			return type;
