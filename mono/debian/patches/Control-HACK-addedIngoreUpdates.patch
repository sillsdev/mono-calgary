From b2dbbe26dea7d0e52cdd7ab484e7a3d2762dcee7 Mon Sep 17 00:00:00 2001
From: Quilt patch <unknown@unknown.com>
Date: Tue, 30 Aug 2011 16:56:37 +0200
Subject: [PATCH] Control-HACK-addedIngoreUpdates

Could not identify an FWNX for this
---
 .../System.Windows.Forms/Control.cs                |   34 ++++++++++++++-----
 1 files changed, 25 insertions(+), 9 deletions(-)

diff --git a/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Control.cs b/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Control.cs
index a895b09..e99e967 100644
--- a/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Control.cs
+++ b/mcs/class/Managed.Windows.Forms/System.Windows.Forms/Control.cs
@@ -4841,6 +4841,18 @@ namespace System.Windows.Forms
 			UpdateBounds(x, y, width, height, width - (rect.Right - rect.Left), height - (rect.Bottom - rect.Top));
 		}
 
+		internal static bool m_ignoreUpdates = false;
+
+		public static void IgnoreUpdates()
+		{
+			m_ignoreUpdates = true;
+		}
+
+		public static void UnignoreUpdates()
+		{
+			m_ignoreUpdates = false;
+		}
+
 		[EditorBrowsable(EditorBrowsableState.Advanced)]
 		protected void UpdateBounds(int x, int y, int width, int height, int clientWidth, int clientHeight) {
 			// UpdateBounds only seems to set our sizes and fire events but not update the GUI window to match
@@ -4868,17 +4880,21 @@ namespace System.Windows.Forms
 			client_size.Width=clientWidth;
 			client_size.Height=clientHeight;
 
-			if (moved) {
-				OnLocationChanged(EventArgs.Empty);
+			if (!m_ignoreUpdates)
+			{
+				if (moved) {
 
-				if (!background_color.IsEmpty && background_color.A < byte.MaxValue)
-					Invalidate ();
-			}
+					OnLocationChanged(EventArgs.Empty);
 
-			if (resized) {
-				OnSizeInitializedOrChanged ();
-				OnSizeChanged(EventArgs.Empty);
-				OnClientSizeChanged (EventArgs.Empty);
+					if (!background_color.IsEmpty && background_color.A < byte.MaxValue)
+						Invalidate ();
+				}
+
+				if (resized) {
+					OnSizeInitializedOrChanged ();
+					OnSizeChanged(EventArgs.Empty);
+					OnClientSizeChanged (EventArgs.Empty);
+				}
 			}
 		}
 
-- 
1.7.4.1

